<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="SRV_MST">
	
    <select id="getCount" parameterClass="java.util.Map" resultClass="int">
        SELECT COUNT(*) FROM SRV_MST A
		LEFT OUTER JOIN COM_CODE B ON ( B.PCODE = 'A02' AND A.SRV_TP = B.CODE ) 
        <isNotEmpty property="WHERE_OPTION">
        $WHERE_OPTION$
        </isNotEmpty>
    </select>

    <select id="getListPage" parameterClass="java.util.Map" resultClass="com.humanval.sipt.dao.Srv_mst">
		SELECT A.SRV_ID, A.SRV_NM, A.SRV_DESC, A.SRV_TP, A.SORTS, A.REG_DT, A.MOD_DT, B.NAME AS SRV_TP_NM 
		FROM SRV_MST A
		LEFT OUTER JOIN COM_CODE B ON ( B.PCODE = 'A02' AND A.SRV_TP = B.CODE ) 
        <isNotEmpty property="WHERE_OPTION">
        $WHERE_OPTION$
        </isNotEmpty>
        ORDER BY A.SORTS 
        LIMIT #START_NO#, #PAGE_CNT#
    </select>
    
    <select id="getList" parameterClass="java.util.Map" resultClass="com.humanval.sipt.dao.Srv_mst">
		SELECT A.SRV_ID, A.SRV_NM, A.SRV_DESC, A.SRV_TP, A.SORTS, A.REG_DT, A.MOD_DT, B.NAME AS SRV_TP_NM 
		FROM SRV_MST A
		LEFT OUTER JOIN COM_CODE B ON ( B.PCODE = 'A02' AND A.SRV_TP = B.CODE ) 
        <isNotEmpty property="WHERE_OPTION">
        $WHERE_OPTION$
        </isNotEmpty>
        ORDER BY A.SORTS   
    </select>
    
    
    
    <select id="getView" parameterClass="java.util.Map" resultClass="com.humanval.sipt.dao.Srv_mst">
		SELECT A.SRV_ID, A.SRV_NM, A.SRV_DESC, A.SRV_TP, A.SORTS, A.REG_DT, A.MOD_DT, B.NAME AS SRV_TP_NM 
		FROM SRV_MST A
		LEFT OUTER JOIN COM_CODE B ON ( B.PCODE = 'A02' AND A.SRV_TP = B.CODE ) 
		WHERE SRV_ID = #SRV_ID#
    </select>
            
    
    <statement id="insert" parameterClass="java.util.Map" resultClass="int">
		INSERT INTO SRV_MST( SRV_NM, SRV_DESC, SRV_TP, SORTS, REG_DT  ) 
		VALUES (#SRV_NM#, #SRV_DESC#, #SRV_TP#, #SORTS#, NOW() )
    </statement> 
    
    <statement id="update" parameterClass="java.util.Map" resultClass="int">
		UPDATE SRV_MST SET  
			SRV_NM=#SRV_NM#, SRV_DESC=#SRV_DESC#,  SRV_TP=#SRV_TP#, SORTS=#SORTS#, MOD_DT=NOW()  
		WHERE SRV_ID = #SRV_ID# 
    </statement> 
        
    <statement id="delete" parameterClass="java.util.Map" resultClass="int">
		DELETE FROM SRV_MST WHERE SRV_ID = #SRV_ID# 
    </statement> 
    
    <statement id="deleteParm" parameterClass="java.util.Map" resultClass="int">
		DELETE FROM PARM_MST WHERE SRV_ID = #SRV_ID# 
    </statement> 
    
</sqlMap>